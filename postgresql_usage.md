# PostgreSQLの使い方

## 前提

- `Mac PostgreSQL 環境構築手順`を参照に実行してエラー無き事

## ①PostgreSQLを立ち上げる

1. Mac posrgreSQL 環境構築手順が終了していれば  
   Macのアプリケーション内に**pgAdmin4**があるのでクリック
2. pgAdmin4が立ち上がれば以下のようになるので**Servers**をクリック

<img src="image/スクリーンショット 2023-10-10 14.37.58.png" width="50%">

3. インストールしたバージョンをクリック

<img src="image/スクリーンショット 2023-10-10 14.28.44.png" width="50%">

4. クリックするとパスワードを求めらるので  
   `PostgreSQLインストール時に設定`したパスワードを入力。
5. 画像の①→②の順にクリック

<img src="image/スクリーンショット 2023-10-10 14.40.22.png" width="50%">

6. 画像のようになればSQL文の実行画面の立ち上げは完了。

<img src="image/スクリーンショット 2023-10-10 14.18.45.png" width="50%">

## 補足説明

### pgAdmin4とは？

>pgAdmin 4は、データベースの管理と操作を簡単に行うためのオープンソースのデータベース管理ツールです。  
>ユーザーフレンドリーなGUIを提供し、SQLクエリの実行、テーブルの作成、データの編集、バックアップの作成などを直感的に行えます。  
>プログラミング初心者にも扱いやすく、PostgreSQLデータベースを効果的に管理できます。 

<div style="page-break-before:always"></div>

## ②pgAdminを使ってデータベースを作成する

- 下記のコマンドでデータベースを作成します。
- このコマンドはエクセルに例えるとエクセルファイルそのものを作成するイメージです。
- 下記コマンドのCREATE DATABASEの所が大文字ですが小文字でも入力できます。
- 後ほどの講義で使用するので一旦「test_db」と入力します。

```sql
CREATE DATABASE test_db;
```

1. 上記のSQL文入力
2. ▶︎ マークをクリックしてSQL文を実行
3. 画像の③のような出力がされればOK。

<img src="image/スクリーンショット 2023-10-10 14.42.58.png" width="50%">

忘れがちなのが文末に「;」を入力する事なので要注意です。

もしエラーが出た方はタイプミスなど見直してみて下さい。

今はデータベースを作成しただけなのでエクセルファイルを作成したような物です。  
ではエクセルのシートのような物を作成します。

デフォルトでは「postgres」というデータベースに接続されています。

なので先ほど作成した「test_db」へ接続していきます。

もし「test_db」の表示がなければ画面更新をしてみます。

以下の画像のように右クリックをして「Refresh」を実行します。

<img src="image/スクリーンショット 2023-10-10 14.52.38.png" width="50%">

1. 接続するデータベースを選択
2. 画像のQuery Toolをクリック

<img src="image/スクリーンショット 2023-10-10 11.24.30.png" width="50%">

接続ができればテーブルを作成します。

以下のコードがテーブルの作成になります。

もし前に実行したコードなどが残っていれば削除して以下を実行して下さい。

```sql
CREATE TABLE human (
    id serial PRIMARY KEY,
    first_name VARCHAR(50),
    last_name VARCHAR(50)
);
```

先ほどを同じ要領でコードを貼り付けて ▶︎ をクリックして実行します。

以下の画像の様に出力されていればOKです。

ここでも「;」が必要なので入力忘れがないように要注意です。

<img src="image/スクリーンショット 2023-10-10 15.01.53.png" width="50%">

このSQLコマンドは、"human"という名前のテーブルを作成するためのものです。  
このテーブルは人の情報を格納するのに使用されます。具体的な列（カラム）の情報は次の通りです：

- id: 整数値を自動的に増やす(serial)主キーとして設定されています。これは各人の一意の識別子です。  
- first_name: 最大50文字の文字列（VARCHAR）を格納する列で、人の名前の一部を保持します。
- last_name: 最大50文字の文字列（VARCHAR）を格納する列で、人の姓を保持します。  
<br>
このコマンドにより、"human"テーブルが作成され、データベース内に人の情報を格納するためのテーブルの骨格が定義されます。  
主キーの"id"を使用して、各人のレコードを一意に識別できます。

<div style="page-break-before:always"></div>

## ③作成できたか確認

以下のコマンドでテーブルが作成できたか確認します。  
  
```sql
SELECT * FROM human;
```

以上のコマンドを実行します。

<img src="image/スクリーンショット 2023-10-10 15.07.16.png" width="50%">

<div style="page-break-before:always"></div>

## ④テーブルにデータを入れていきます

ここから[Udemy](https://daihatsujp.udemy.com/course/sql-begginer/learn/lecture/24669372#overview)で見た動画が役立ちます。  
心配な方はもう一度おさらいをしておきましょう。

ここでも以前に実行したコードが残っていれば削除して下さい。

```sql
INSERT INTO human (first_name, last_name)
VALUES ('太郎', '大発');
```

エラーが出なければデータ入力完了です。  
ではデータを確認していきます。  

```sql
SELECT * FROM human;
```

以下のように出力されていれば完了です。  

<img src="スクリーンショット 2023-10-10 15.21.34.png" width="50%">

## PostgreSQLの操作は一旦ここまで

お疲れ様でした。  
一旦ここでPostgreSQLの操作概要はここまでにします。  
  
もっと深掘りして知りたい人は公式ドキュメントを見ることをおすすめします。  
